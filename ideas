how to separate trees better?

1) Form the top:

In connected components.

do not choose centrois, choose the highest directly.

When two components fuse, sort its tops by altitude. keep the highest, for the rest, if they are too close to a consolidated top (within 2*epsilon), ignore them. ONGONING REFINEMENT



2) From the bottom:

threshold by percentile 

maybe find gradient lines and make a hole there

then erode the hell out of it
